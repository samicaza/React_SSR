{"code":"!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"/build\",r(r.s=5)}([function(e,t){e.exports=require(\"react\")},function(e,t){e.exports=require(\"react-redux\")},function(e,t){e.exports=require(\"react-router\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o={message:null};t.appReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case\"SET_MESSAGE\":return n({},e,{message:t.message});default:return e}},t.setMessage=function(e){return{type:\"SET_MESSAGE\",message:e}}},function(e,t){e.exports=require(\"redux\")},function(e,t,r){\"use strict\";r(6);var n=d(r(7)),o=d(r(0)),i=d(r(8)),a=r(2),u=d(r(9)),l=d(r(10)),s=(r(4),r(1)),c=d(r(13));function d(e){return e&&e.__esModule?e:{default:e}}var f=(0,n.default)(),m=process.env.PORT||3e3;f.use(u.default.json()),f.use(n.default.static(\"build/public\")),f.use(function(e,t){var r=(0,c.default)(),n=i.default.renderToString(o.default.createElement(s.Provider,{store:r},o.default.createElement(a.StaticRouter,{location:e.url,context:{}},o.default.createElement(l.default,null)))),u=r.getState();t.send(function(e,t){return\"\\n          <html>\\n          <head>\\n          </head>\\n          <body>\\n            <div id='root'>\"+e+\"</div>\\n            <script>window.__PRELOADED_STATE__ = \"+JSON.stringify(t).replace(/</g,\"\\\\u003c\")+\"<\\/script>\\n            <script type='text/babel' src='client_bundle.js'><\\/script>\\n          </body>\\n        </html>\"}(n,u))}),f.listen(m,function(){console.log(\"React SSR App is running on port \"+m)})},function(e,t){e.exports=require(\"babel-polyfill\")},function(e,t){e.exports=require(\"express\")},function(e,t){e.exports=require(\"react-dom/server\")},function(e,t){e.exports=require(\"body-parser\")},function(e,t){throw new Error(\"Module build failed (from ./node_modules/babel-loader/lib/index.js):\\nSyntaxError: Unexpected token, expected ... (13:22)\\n\\n\u001b[0m \u001b[90m 11 | \u001b[39m    \u001b[36mreturn\u001b[39m (\\n \u001b[90m 12 | \u001b[39m      \u001b[33m<\u001b[39m\u001b[33mSwitch\u001b[39m\u001b[33m>\u001b[39m\\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 13 | \u001b[39m        \u001b[33m<\u001b[39m\u001b[33mRoute\u001b[39m exact {\u001b[33m.\u001b[39m\u001b[33m.\u001b[39mprops} path\u001b[33m=\u001b[39m\u001b[32m'/'\u001b[39m component\u001b[33m=\u001b[39m{\u001b[33mHomePage\u001b[39m}\u001b[33m/\u001b[39m\u001b[33m>\u001b[39m\\n \u001b[90m    | \u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\\n \u001b[90m 14 | \u001b[39m        \u001b[33m<\u001b[39m\u001b[33mRoute\u001b[39m exact path\u001b[33m=\u001b[39m\u001b[32m'/article'\u001b[39m component\u001b[33m=\u001b[39m{\u001b[33mArticle\u001b[39m}\u001b[33m/\u001b[39m\u001b[33m>\u001b[39m\\n \u001b[90m 15 | \u001b[39m      \u001b[33m<\u001b[39m\u001b[33m/\u001b[39m\u001b[33mSwitch\u001b[39m\u001b[33m>\u001b[39m\\n \u001b[90m 16 | \u001b[39m    )\u001b[0m\\n\")},,,function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l(s,e)};var n=r(4),o=u(r(14)),i=r(3),a=u(r(15));function u(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.compose)((0,n.applyMiddleware)(o.default))(n.createStore),s=(0,n.combineReducers)({appReducer:i.appReducer,optimizelyReducer:a.default})},function(e,t){e.exports=require(\"redux-thunk\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=u(r(16)),o=u(r(17)),i=u(r(18)),a=u(r(19));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(o,i){try{var a=t[o](i),u=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(u).then(function(e){n(\"next\",e)},function(e){n(\"throw\",e)});e(u)}(\"next\")})}}var s=\"https://cdn.optimizely.com/datafiles/BwwucPUXt9Zc4PttHxBCXQ.json\",c=5,d={fetchAsync:function(){var e=l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.default.get(s).then(function(e){return window.localStorage.setItem(\"datafile\",JSON.stringify(e.data)),e});case 3:return e.abrupt(\"return\",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case\"end\":return e.stop()}},e,void 0,[[0,6]])}));return function(){return e.apply(this,arguments)}}(),fetchSync:function(){var e=(0,a.default)(\"GET\",s);return window.localStorage.setItem(\"datafile\",e.body),e.body},datafileCheck:function(){var e=l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.default.get(s).then(function(e){return window.localStorage.getItem(\"datafile\")!==JSON.stringify(e.data)?(window.localStorage.setItem(\"datafile\",JSON.stringify(e.data)),console.log(\"the datafile has been updated\"),!0):(console.log(\"just did a datafile check but the datafile has remained the same\"),!1)});case 2:return e.abrupt(\"return\",e.sent);case 3:case\"end\":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},f={optlyClient:!1,lastRequest:!1,datafileChange:!1,attributes:{name:\"Peter\"},actions:!1};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments[1],r=Object.assign({},e),o=new Date,a={activate:function(e){return r.optlyClient?r.optlyClient.activate(e,r.userProfile.user_id,r.attributes):void console.log(\"no client available, did not activate experiment: \",e)},event:function(e){return r.optlyClient?(r.optlyClient.track(e,r.userProfile.user_id,r.attributes),void console.log(\"sent event: \",e)):void console.log(\"no client available, did not send event: \",e)},getVariation:function(e){return r.optlyClient?r.optlyClient.getVariation(e,r.userProfile.user_id,r.attributes):void console.log(\"no client available, did not get variation for experiment: \",e)},isFeatureEnabled:function(e){return r.optlyClient?r.isFeatureEnabled(e,r.userProfile.user_id,r.attributes):void console.log(\"no client available, could not enable feature for experiment: \",e)},getFeatureVariable:function(e,t,n){if(r.optlyClient)switch(n){case\"boolean\":return r.optlyClient.getFeatureVariableBoolean(e,t,r.userProfile.user_id,r.attributes);case\"string\":return r.optlyClient.getFeatureVariableString(e,t,r.userProfile.user_id,r.attributes);case\"integer\":return r.optlyClient.getFeatureVariableInteger(e,t,r.userProfile.user_id,r.attributes);case\"double\":return r.optlyClient.getFeatureVariableDouble(e,t,r.userProfile.user_id,r.attributes);default:return void console.log(\"please specify a type of feature variable to return\")}}},u={lookup:function(e){return r.userProfile},save:function(e){r.userProfile=e}},l=function(e){return n.default.createInstance({datafile:e,userProfileService:u})};switch(t.type){case\"DATAFILE_MANAGER\":var s=window.localStorage.getItem(\"lastRequest\");if(!window.localStorage.getItem(\"datafile\")||o.getTime()-s>=60*c*1e4){if(\"async\"===t.timing)return d.fetchAsync().then(function(e){return r.optlyClient=l(e.data),window.localStorage.setItem(\"lastRequest\",o.getTime()),console.log(\"i have downloaded it async and initialized\"),r}),r;if(\"sync\"===t.timing){var m=d.fetchSync();return window.localStorage.setItem(\"lastRequest\",o.getTime()),r.optlyClient=l(m),console.log(\"I have downloaded it sync and initalized\"),r}return console.log(\"error, you need to supply a timing paramater\"),r}return(!s||o.getTime()-s>=60*c*1e3)&&(window.localStorage.setItem(\"lastRequest\",o.getTime()),d.datafileCheck().then(function(e){if(e)return r.datafileChange=!0,console.log(\"I have set the datafileChange flag\",r),r})),!r.datafileChange&&r.optlyClient?(console.log(\"I have not re-initialized the client due to no datafile change\"),r):r.datafileChange&&r.optlyClient?(r.optlyClient=l(JSON.parse(window.localStorage.getItem(\"datafile\"))),r.datafilechange=!1,console.log(\"I had a client already but there was a datafilechange, so I re-initalized the client\"),r):(console.log(\"just initalized the client!\"),r.optlyClient=l(JSON.parse(window.localStorage.getItem(\"datafile\"))),r);case\"USER_SERVICE\":var p;if(t.id?(p=t.id,window.localStorage.setItem(\"userId\",t.id)):p=window.localStorage.getItem(\"userId\"),t.attributes&&(r.attributes=t.attributes),p&&!r.userProfile)return console.log(\"set user id in redux store\"),r.userProfile={user_id:\"\",experiment_bucket_map:{}},r.userProfile.user_id=p,r.actions=a,r;if(!p){var g=(0,i.default)();return r.userProfile={user_id:\"\",experiment_bucket_map:{}},r.userProfile.user_id=g,window.localStorage.setItem(\"userId\",g),r.actions=a,console.log(\"created user ID and set it in redux and local cache\"),r}return r;case\"UPDATE_ATTR\":return t.attr&&t.value?r.attributes[t.attr]=t.value:console.log(\"You need to provide a key and value to update your attributes\"),r;default:return e}}},function(e,t){e.exports=require(\"@optimizely/optimizely-sdk\")},function(e,t){e.exports=require(\"axios\")},function(e,t){e.exports=require(\"uuid/v4\")},function(e,t){e.exports=require(\"sync-request\")}]);","extractedComments":[]}